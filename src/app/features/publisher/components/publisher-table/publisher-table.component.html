<div class="relative overflow-x-auto">
  <div class="flex gap-4 mt-4" [formGroup]="formFilter">
    <mat-form-field appearance="outline">
      <mat-label>Grupo</mat-label>
      <mat-select formControlName="group" multiple>
        @for (group of groups; track group) {
          <mat-option [value]="group['id']">{{ group['name'] }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Privilegio</mat-label>
      <mat-select formControlName="privileges" multiple>
        @for (privilege of privileges; track privilege) {
          <mat-option [value]="privilege['tag']">{{ privilege['name'] }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="flex-1">
      <mat-label>Buscar</mat-label>
      <input matInput formControlName="search" />
    </mat-form-field>
  </div>

  <section class="publisher-container">
    <table mat-table [dataSource]="dataSource" matSort class="custom-table">
      <!-- group_id Column -->
      <ng-container matColumnDef="group_id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Grupo</th>
        <td mat-cell *matCellDef="let row">{{ row.group_id }}</td>
      </ng-container>

      <!-- firstname Column -->
      <ng-container matColumnDef="firstname">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
        <td mat-cell *matCellDef="let row">{{ row.firstname }}</td>
      </ng-container>

      <!-- lastname Column -->
      <ng-container matColumnDef="lastname">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Apellido</th>
        <td mat-cell *matCellDef="let row">{{ row.lastname }}</td>
      </ng-container>

      <!-- Baptism Date Column -->
      <ng-container matColumnDef="baptized_at">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Bautismo</th>
        <td mat-cell *matCellDef="let row">{{ row.baptized_at | date }}</td>
      </ng-container>

      <!-- Baptism Date Column -->
      <ng-container matColumnDef="privileges">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Privilegios</th>
        <td mat-cell *matCellDef="let row">
          <div class="flex gap-1">
            @for (privilege of row.privileges; track privilege) {
              <app-badge [color]="privilege.color" [name]="privilege.name" />
            }
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let element; columns: displayedColumns" (click)="openPublisherCard(element)"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell text-center!" colspan="5">BÃºsqueda sin resultados</td>
      </tr>
    </table>
  </section>
</div>
